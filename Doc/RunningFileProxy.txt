Instructions for testing fileProxy on a development machine
===========================================================


After keys are initialized for fileProxy and fileClient, perform the
following operations as superuser

1. stop tcsd if started

  /etc/init.d/trousers stop 

2. make sure you have access to the tpm device. 

  chown <username> /dev/tpm0

you will have to log out and back in to get the right group permissions.

3. create the tcioDD0 device

  cd /dev
  mknod tcioDD0 c 100 0
  chmod 0777 /dev/tcioDD0

4. add tcioDD to the kernel  
  cd ~/jlmcrypt
  insmod tcioDD.ko

The first time you run tcService, you must run it with the -initKeys flag.  
This generates the OS keys stores them and causes keyNegoServer to sign them.  
In the paper, this is called "tao initialization" for the OS.  keyNegoServer 
need only be available when a tao layer needs to initialize.  Here
is a procedure.  Start keyNegoServer.  In a different console on the fileProxy machine,
type:

./tcService.exe -initKeys

Unlike a normal run of tcService where tcService continues running, tcService will exit
after the keys are generated and the cert signed and stored.

Regular user
./tcService.exe &
sleep 2s
./fileServer.exe -initProg
sleep 2s
./fileClient.exe -initProg
sleep 5s
dmesg>driver.log


